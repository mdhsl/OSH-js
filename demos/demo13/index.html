<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <title>Test OSH-js API</title>
    
        <!-- Hashtable -->
    <script type="text/javascript" src="js/osh-all.min.js"></script>
  </head>
  <body>
   <h2>This is a test video for OSH-JS Api</h2>
   <h3>Simple use of H264 broadway Viewer</h3>
    <div class="container-vertical">
      <label for="url">WebSocket Url:</label> 
      <input type="text" name="url" id="url"  size="50"/>
      <button type="button" onclick="load()">Load</button>
      <div id="timestamp">Time: </div>
      <div id="container-video"></div>
    </div>
    <style>
      .canvas-video {
        width:1280px;
        height:720px;
      }
    </style>
    <script type="text/javascript">
      function load() {
        var url = document.getElementById('url').value;
        loadStream(url);
      }
      function loadStream(url) {
          var dataSourceProvider = new OSH.DataSource.DataSourceProvider({
             bufferingTime:2*1000, // 5 seconds
             synchronizedTime: true, // does not sync the data,
             replayFactor:1,
             startTime:"2016-05-19T17:03:21Z"
          });
          
          var videoDataSource = new OSH.DataSource.VideoDataSource("video1",url,{ type: "h264" });
          
          //a view can be fed by a same stream
          var oshVideoView = new OSH.UI.VideoView("container-video",{
            type: "h264",
            width: "1280",
            height: "720",
            css: "canvas-video"
          });
          
          dataSourceProvider.addDataSource(videoDataSource);
          
          //set dataView
          oshVideoView.setDataViewId(videoDataSource.getId());
          
           //CONTROLLER
          var controller = new OSH.Controller();
          controller.addDataSourceProvider(dataSourceProvider);
          controller.addView(oshVideoView);
          
          videoDataSource.connect();
          
      } // end load
    </script>
  </body>
</html>
